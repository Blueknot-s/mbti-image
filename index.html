<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBTI 궁합 감성 이미지 생성기</title>
  <style>
    body { font-family: 'Arial', sans-serif; background: #f4f4f4; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
    h2 { color: #2c4ecf; }
    select, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ccc; }
    .result { margin-top: 20px; }
    .hearts { font-size: 20px; color: red; }
    .image-preview { margin-top: 10px; text-align: center; }
    .image-preview img { max-width: 100%; border-radius: 12px; }
    .emotion { font-weight: bold; color: #555; margin-top: 10px; }
    .buttons { display: flex; gap: 10px; justify-content: center; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h2><strong>MBTI 궁합 테스트 ✨ 감성 이미지 스타일 선택</strong></h2>

    <label for="mbti1">나의 MBTI</label>
    <select id="mbti1"></select>

    <label for="mbti2">상대의 MBTI</label>
    <select id="mbti2"></select>

    <label for="style">감성 이미지 스타일</label>
    <select id="style">
      <option value="line-art">라인 아트 (line-art)</option>
      <option value="watercolor">수채화 (watercolor)</option>
      <option value="ghibli">지브리풍 (ghibli style)</option>
    </select>

    <button onclick="generateMatch()">궁합 보기</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    const mbtis = ["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP",
                    "ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"];

    const select1 = document.getElementById('mbti1');
    const select2 = document.getElementById('mbti2');
    mbtis.forEach(mbti => {
      select1.innerHTML += `<option value="${mbti}">${mbti}</option>`;
      select2.innerHTML += `<option value="${mbti}">${mbti}</option>`;
    });

    function generateMatch() {
      const mbti1 = select1.value;
      const mbti2 = select2.value;
      const style = document.getElementById('style').value;

      const score = Math.floor(Math.random() * 6) + 5; // 5~10점 랜덤
      const hearts = '❤️'.repeat(score) + '🤍'.repeat(10 - score);
      const messages = [
        "두 사람은 서로를 보완하며 성장할 수 있어요.",
        "서로 다른 점이 오히려 매력 포인트!",
        "비슷한 성향으로 깊은 교감을 나눌 수 있어요.",
        "어쩌면 처음엔 다툼도, 하지만 시간이 답이에요.",
        "운명적인 케미, 영화 속 주인공처럼 어울려요!"
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];

      const prompt = `${style} illustration of ${mbti1} and ${mbti2} couple`;
      const imgUrl = `https://dummyimage.com/512x512/eeeeee/000000&text=${mbti1}+%E2%9D%A4+${mbti2}`;

      document.getElementById('result').innerHTML = `
        <p><strong>궁합 점수:</strong> <span class="hearts">${hearts}</span></p>
        <p class="emotion">${msg}</p>
        <div class="image-preview">
          <img src="${imgUrl}" alt="MBTI 감성 이미지" />
        </div>
        <div class="buttons">
          <button onclick="copyImageUrl('${imgUrl}')">공유</button>
          <button onclick="downloadImage('${imgUrl}')">다운로드</button>
        </div>
      `;
    }

    function copyImageUrl(url) {
      navigator.clipboard.writeText(url).then(() => alert("이미지 주소가 복사되었습니다!"));
    }

    function downloadImage(url) {
      const a = document.createElement('a');
      a.href = url;
      a.download = 'mbti-image.png';
      a.click();
    }
  </script>
</body>
</html>
